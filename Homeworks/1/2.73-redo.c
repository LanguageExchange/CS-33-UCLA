#include <stdio.h>#include <limits.h>int saturating_add(int x, int y) {	int w1 = sizeof(x) << 3; 	int w2 = sizeof(y) << 3; 	unsigned a = x >> (w1 - 1);	unsigned b = y >> (w2 - 1);		int result; 	int useless;	__builtin_add_overflow (x, y, &result);	__builtin_add_overflow (x, y, &useless) && ((a && b) && (result = INT_MIN));	__builtin_add_overflow (x, y, &useless) && ((~a && ~b) && (result = INT_MAX));	return result;}int main(){	for (int i = -2; i < 3; ++i)		for (int j = -2; j < 3; ++j)			printf("%d + %d = %d\n", i, j, saturating_add(i, j));	printf("%d + %d = %d\n", INT_MIN, INT_MIN, saturating_add(INT_MIN, INT_MIN));	printf("%d + %d = %d\n", -3, INT_MIN, saturating_add(-3, INT_MIN));	printf("%d + %d = %d\n", INT_MIN, -3, saturating_add(INT_MIN, -3));	printf("%d + %d = %d\n", INT_MIN, 0, saturating_add(INT_MIN, 0));	printf("%d + %d = %d\n", 0, INT_MIN, saturating_add(0, INT_MIN));	printf("%d + %d = %d\n", INT_MAX, INT_MAX, saturating_add(INT_MAX, INT_MAX));	printf("%d + %d = %d\n", 3, INT_MAX, saturating_add(3, INT_MAX));	printf("%d + %d = %d\n", INT_MAX, 3, saturating_add(INT_MAX, 3));	printf("%d + %d = %d\n", INT_MAX, 0, saturating_add(INT_MAX, 0));	printf("%d + %d = %d\n", 0, INT_MAX, saturating_add(0, INT_MAX));	printf("%d + %d = %d\n", INT_MAX, -3, saturating_add(INT_MAX, -3));	printf("%d + %d = %d\n", -3, INT_MAX, saturating_add(-3, INT_MAX));	return 0;}